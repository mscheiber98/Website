<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Nice Background Animation</title>
    <script src="lib/gl-matrix.js"></script>
    <link href="https://unpkg.com/tailwindcss@^2/dist/tailwind.min.css" rel="stylesheet">
</head>

<body class="h-screen">
    <div class="flex justify-center items-center">
        <canvas id="canvas"></canvas>
    </div>

    <script>
        const canvas = document.getElementById("canvas");
        const ctx = canvas.getContext("2d");

        let midX;
        let midY;

        let mouseX;
        let mouseY;

        resizeCanvas();
        window.addEventListener("resize", resizeCanvas);
        canvas.addEventListener("mousemove", function (e) {
            let cRect = canvas.getBoundingClientRect();

            //relative position of the canvas
            let canvX = cRect.x;
            let canvY = cRect.y;

            //general position of mouse
            let mousePosX = e.clientX;
            let mousePosY = e.clientY;

            //position of mouse on canvas
            mouseX = Math.round(mousePosX - canvX);
            mouseY = Math.round(mousePosY - canvY);

            //display mouse position on canvas
            ctx.font = "16px Mono";
            ctx.clearRect(0, 0, 10000, 10000);
            ctx.strokeRect(0, 0, 127, 30);
            ctx.fillText("X: " + mouseX + " Y: " + mouseY, 10, 20);

            draw();

        })

        function resizeCanvas() {
            canvas.width = window.innerWidth;
            canvas.height = window.innerHeight;
            getMid();
            draw();
        }

        function getMid() {
            midX = Math.round(canvas.width / 2);
            midY = Math.round(canvas.height / 2);
            ctx.fill();
        }

        function draw() {

            drawEye(midX - 100, midY, 50);
            drawEye(midX + 100, midY, 50)


        }

        function drawEye(posX, posY, r) {

            let innerBorderRadius = r / 2;
            let pupilRadius = r / 3;

            //directionvector from eye to mouse
            let dirX = mouseX - posX;
            let dirY = mouseY - posY;
            //calculate length of vector
            let len = Math.sqrt(Math.pow(dirX, 2) + Math.pow(dirY, 2));

            //trim vector if it's outside the inner eye border, i.e. if it's longer than r/2
            //this way the pupil stays always inside the eye
            if (len > innerBorderRadius) {
                dirX = (dirX / len) * innerBorderRadius;
                dirY = (dirY / len) * innerBorderRadius;
            }

            //draw pupil
            ctx.beginPath();
            ctx.arc(posX + dirX, posY + dirY, pupilRadius, 0, Math.PI * 2, true);
            ctx.fill();
            ctx.closePath();
            //draw outer circle
            ctx.beginPath();
            ctx.arc(posX, posY, r, 0, Math.PI * 2, true);
            ctx.stroke();
            ctx.closePath();
        }


    </script>
</body>

</html>